<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include ("./partials/head") %>
    <title>Score</title>
  </head>
  <body>
    <%- include('./partials/nav') %>

    <div class="container mt-5">
      <% if (error) { %>
      <div class="alert alert-danger text-center"><%= error %></div>
      <script>
        setTimeout(() => {
          window.location.href = "/";
        }, 5000);
      </script>
      <% } %>

      <h2 class="text-center mb-4">Your Results</h2>

      <div class="d-flex flex-column align-items-center">
        <% questions.forEach((q) => { %>
        <div class="card mb-4 shadow-sm" style="width: 100%; max-width: 400px">
          <div class="card-body">
            <p class="card-title fw-bold text-center fs-5 mb-3">
              <%= q.question %>
            </p>

            <p class="mb-1">
              <strong>Your answer:</strong> <%= q.userAnswer || 'No answer' %>
              <% if (q.isCorrect) { %> ✅ <% } else { %> ❌ <% } %>
            </p>
            <% if (!q.isCorrect) { %>
            <p class="mb-0">
              <strong>Correct answer:</strong> <%= q.correctAnswer %>
            </p>
            <% } %>
          </div>
        </div>
        <% }) %>
      </div>

      <div class="mt-4 alert alert-info text-center">
        <strong>Score: <%= score %> / <%= total %></strong>
      </div>
    </div>

    <style>
      .card {
        border-radius: 16px;
        background: #f8f9fa;
      }
      .btn-primary {
        font-weight: 600;
      }
    </style>

    <%- include('./partials/script') %>
  </body>
</html>
